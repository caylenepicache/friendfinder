<!DOCTYPE html>
<html lang = "en-us">

<head>
    <title>Friend Finder</title>
    <meta charset="UTF-8">

    <script src="https://code.jquery.com/jquery.js"></script>
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>

<body class="bg-info">

<div class= "container bg-info mx-auto ml-5 mr-5 mt-5 p-3">
    <h4 class="display-3 text-warning"><strong>Survey Questions</strong></h4>
    <h5 class="display-5"><strong>About You</strong></h5>
    <form>
        <div class="form-group">
            <label for="exampleInputEmail1">Name (Required)</label>
            <input type="text" class="form-control" id="userName" aria-describedby="emailHelp" placeholder="Your Name Here">
        </div>
        <div class="form-group">
            <label for="exampleInputPassword1">Link to Photo Image (Required)</label>
            <input type="text" class="form-control" id="userImg" placeholder="Photo URL Here">
        </div>

        <h5 class="display-5"><strong>Questions</strong></h5>

        <div class="form-group">
            <label for="exampleFormControlSelect1">I love dogs</label>
            <select class="form-control" id="qOne">
                <option value="">Choose an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
                <label for="exampleFormControlSelect1">When making a decision, you rely more on your feelings than on analysis of the situation.</label>
                <select class="form-control" id="qTwo">
                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
        </div>
        <div class="form-group">
                <label for="exampleFormControlSelect1">You spend your leisure time actively socializing with a group of people, attending parties, shopping, etc.</label>
                <select class="form-control" id="qThree">
                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
        </div>
        <div class="form-group">
                <label for="exampleFormControlSelect1">You easily empathize with the concerns of other people</label>
                <select class="form-control" id="qFour">
                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
        </div>
        <div class="form-group">
                <label for="exampleFormControlSelect1">You take pleasure in putting things in order</label>
                <select class="form-control" id="qFive">
                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
        </div>
        <div class="form-group">
                <label for="exampleFormControlSelect1">You rarely deviate from your habits</label>
                <select class="form-control" id="qSix">
                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
        </div>
        <div class="form-group">
                <label for="exampleFormControlSelect1">I like dancing</label>
                <select class="form-control" id="qSeven">
                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
        </div>
        <div class="form-group">
                <label for="exampleFormControlSelect1">You rarely do something just out of sheer curiosity.</label>
                <select class="form-control" id="qEight">
                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
        </div>
        <div class="form-group">
                <label for="exampleFormControlSelect1">You often get so lost in thoughts that you ignore or forget your surroundings.</label>
                <select class="form-control" id="qNine">
                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
        </div>
        <div class="form-group">
                <label for="exampleFormControlSelect1">I'm currently hungry</label>
                <select class="form-control" id="qTen">
                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
        </div>
        <button type="button" id = "submitBtn" class="btn btn-warning btn-lg btn-block">Submit</button>
    </form>
    <div class="container">
        <p><a class="text-white" href="/api/friends">API Friends List</a> | <a class="text-white" href="https://github.com/caylenepicache/friendfinder">GitHub Repo</a></p>
    </div>



    <!-- MODAL -->
      
    <div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content bg-warning">
            <div class="modal-header bg-warning">
              <h5 class="modal-title" id="userMatchName"></h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <h5 class="modal-body bg-warning" id="userMatchImg"></h5>
            <div class="modal-footer bg-warning">
              <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
    </div>


    <!-- Grabs information and sends it to server -->
<script type="text/javascript">
    $(document).ready(function() {
        $("#submitBtn").on("click", function() {

            function validateForm() {
                var isValid = true;
                $('.validate').each(function() {
                    if ($(this).val() === ''){
                        isValid = false;
                    }
                });
                $('.browser-default').each(function() {
                    if ($(this).val() === ""){
                        isValid = false;
                    }
                });
                return isValid;
            }

            //if everything is filled
            if (validateForm() == true) {
                //creates a new friend from the values submitted
                var newFriend = {
                    name: $('#userName').val().trim(),
                    profilePic: $('#userImg').val().trim(),
                    scores: [
                        $('#qOne').val(),
                        $('#qTwo').val(),
                        $('#qThree').val(),
                        $('#qFour').val(),
                        $('#qFive').val(),
                        $('#qSix').val(),
                        $('#qSeven').val(),
                        $('#qEight').val(),
                        $('#qNine').val(),
                        $('#qTen').val(),
                    ]
                };


                //Grabs current URL of website
                var location = window.location.origin;

                $.post("/api/friends", newFriend, function(data) {

                    $("#userMatchName").text(data.name);
                    $("#userMatchImg").attr("src", data.photo);
                });


                // Show the modal with the best match
                $('.modal').modal();


                //clear form after submission
                $('#name').val("");
                $('#photo').val("");
                $('#qOne').val("");
                $('#qTwo').val("");
                $('#qThree').val("");
                $('#qFour').val("");
                $('#qFive').val("");
                $('#qSix').val("");
                $('#qSeven').val("");
                $('#qEight').val("");
                $('#qNine').val("");
                $('#qTen').val(""); 

            }
             
            else {
                alert("Please fill out ALL fields before submitting survey!")
            }
        });
    });
</script>
</div>
</body>
</html>